<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="generator" content="">
    <title>Testground as a Service</title>

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap/assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

table {
  width: 100%;
  table-layout: fixed;
}

.highcharts-figure, .highcharts-data-table table {
    min-width: 310px; 
    max-width: 1200px;
    margin: 1em auto;
}

.highcharts-data-table table {
	font-family: Verdana, sans-serif;
	border-collapse: collapse;
	border: 1px solid #EBEBEB;
	margin: 10px auto;
	text-align: center;
	width: 100%;
	max-width: 1200px;
}
.highcharts-data-table caption {
    padding: 1em 0;
    font-size: 1.2em;
    color: #555;
}
.highcharts-data-table th {
	font-weight: 600;
    padding: 0.5em;
}
.highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
    padding: 0.5em;
}
.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
    background: #f8f8f8;
}
.highcharts-data-table tr:hover {
    background: #f1f7ff;
}

    </style>
    <link href="/static/bootstrap/tasks.css" rel="stylesheet">
    <script src="/static/highcharts/highcharts.js"></script>
    <script src="/static/highcharts/modules/data.js"></script>
    <script src="/static/highcharts/modules/series-label.js"></script>
    <script src="/static/highcharts/modules/exporting.js"></script>
    <script src="/static/highcharts/modules/export-data.js"></script>
    <script src="/static/highcharts/modules/accessibility.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="/static/bootstrap/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="/static/bootstrap/assets/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="/">Testground as a Service</a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <!--
  <ul class="navbar-brand navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a class="nav-link" href="#">Sign out</a>
    </li>
  </ul>
  -->
</nav>

<div class="container-fluid">
  <div class="row">
    <main role="main" class="col-md-12 ml-sm-auto col-lg-12 px-md-4">
      <h1 class="h2" style="margin-top: 10px">Auto-discovered metrics for {{ .Plan }}</h1>

<div class="accordion" id="accordionExample">

{{range .Items}}

  <div class="card">
    <div class="card-header" id="heading_{{ .Id }}">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse_{{ .Id }}" aria-expanded="true" aria-controls="collapseOne">
          {{ .Title }}
        </button>
      </h2>
    </div>

    <div id="collapse_{{ .Id }}" class="collapse" aria-labelledby="heading_{{ .Id }}" data-parent="#accordionExample">
      <div class="card-body">
        <figure class="highcharts-figure">
          <div id="container_{{.Id}}"></div>
        </figure>

        <button id="btn_{{.Id}}" class="btn btn-success">
          Toggle series
        </button>
      </div>
    </div>
  </div>



		<script type="text/javascript">
  Highcharts.chart('container_{{.Id}}', {
    chart: {
        type: 'spline',
        zoomType: 'xy'
    },
    title: {
        text: '{{.Title}}'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            second: '%Y-%m-%d-%H:%M:%S',
            minute: '%Y-%m-%d-%H:%M',
            hour: '%Y-%m-%d-%H:%M',
            day: '%Y-%m-%d',
            week: '%Y-%m-%d',
            month: '%Y-%m',
            year: '%Y'
        },
        title: {
            text: 'Timestamp'
        }
    },
    yAxis: {
        title: {
            text: ''
        },
        labels: {
            formatter: function() {
              return this.value + " " + {{ .Unit }};
            }
        },
        min: 0
    },
//    tooltip: {
//        headerFormat: '<b>{series.name}</b><br>',
//        pointFormat: '{point.x:%e. %b ; %H:%M}: {point.y}ns'
//    },

    plotOptions: {
        series: {
            marker: {
                enabled: true
            }
        }
    },

    colors: ['#6CF', '#39F', '#06C', '#036', '#000'],

    // Define the data points. All series have a dummy year
    // of 1970/71 in order to be compared on the same x axis. Note
    // that in JavaScript, months start at 0 for January, 1 for February etc.
    series: [{
        name: ""
    }],

    legend: {
      maxHeight: 100,
    },

    data: {
      csvURL: '{{ .RootURL }}/data?series={{.Series}}',
        beforeParse: function (csv) {
            return csv.replace(/\n\n/g, '\n');
        }
    },


    responsive: {
        rules: [{
            condition: {
                maxWidth: 1600
            }
        }]
    }
}, function(chart) {
    $('#btn_{{ .Id }}').click(function() {
      var series = chart.series[0];
      if (series.visible) {
        $(chart.series).each(function(){
          this.setVisible(false, false);
        });
        chart.redraw();
      } else {
        $(chart.series).each(function(){
          this.setVisible(true, false);
        });
        chart.redraw();
      }
    });
});

		</script>

  {{end}}

</div>

    </main>
  </div>
</div>
        <script src="/static/bootstrap/tasks.js"></script></body>
</html>

